705238847383418deefa9fe192f96b04
"use strict";
// Mock NextResponse
jest.mock('next/server', ()=>({
        NextResponse: {
            json: jest.fn((data, options)=>({
                    status: options?.status || 200,
                    json: async ()=>data,
                    headers: new Map()
                }))
        }
    }));
Object.defineProperty(exports, "__esModule", {
    value: true
});
const _route = require("../../app/api/health/route");
describe('Health API', ()=>{
    beforeEach(()=>{
        // Reset fetch mock before each test
        jest.clearAllMocks();
    });
    it('returns 200 status with health information', async ()=>{
        // Create a minimal NextRequest-like mock
        const request = new Request('http://localhost:3000/api/health');
        // @ts-ignore - adapt minimal shape for NextRequest
        const nextReq = request;
        const response = await (0, _route.GET)(nextReq);
        expect(response.status).toBe(200);
        const data = await response.json();
        expect(data).toHaveProperty('status');
        expect(data).toHaveProperty('timestamp');
        expect(data).toHaveProperty('version');
        expect(data.status).toBe('healthy');
    });
    it('includes required health check fields', async ()=>{
        const request = new Request('http://localhost:3000/api/health');
        const response = await (0, _route.GET)(request);
        const data = await response.json();
        expect(data).toHaveProperty('database');
        expect(data).toHaveProperty('uptime');
        expect(data).toHaveProperty('environment');
    });
    it('returns correct response format', async ()=>{
        const request = new Request('http://localhost:3000/api/health');
        const response = await (0, _route.GET)(request);
        const data = await response.json();
        // Check all required fields
        expect(data).toHaveProperty('status');
        expect(data).toHaveProperty('timestamp');
        expect(data).toHaveProperty('version');
        expect(data).toHaveProperty('environment');
        expect(data).toHaveProperty('database');
        expect(data).toHaveProperty('uptime');
        expect(data).toHaveProperty('memory');
        // Check data types
        expect(typeof data.status).toBe('string');
        expect(typeof data.timestamp).toBe('string');
        expect(typeof data.version).toBe('string');
        expect(typeof data.environment).toBe('string');
        expect(typeof data.database).toBe('string');
        expect(typeof data.uptime).toBe('number');
        expect(typeof data.memory).toBe('object');
    });
});

//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIkM6XFxrb2RcXGNla2lyZGVrXFx0ZXN0c1xcYXBpXFxoZWFsdGgudGVzdC50cyJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyBHRVQgfSBmcm9tICcuLi8uLi9hcHAvYXBpL2hlYWx0aC9yb3V0ZSdcclxuXHJcbi8vIE1vY2sgTmV4dFJlc3BvbnNlXHJcbmplc3QubW9jaygnbmV4dC9zZXJ2ZXInLCAoKSA9PiAoe1xyXG4gIE5leHRSZXNwb25zZToge1xyXG4gICAganNvbjogamVzdC5mbigoZGF0YSwgb3B0aW9ucykgPT4gKHtcclxuICAgICAgc3RhdHVzOiBvcHRpb25zPy5zdGF0dXMgfHwgMjAwLFxyXG4gICAgICBqc29uOiBhc3luYyAoKSA9PiBkYXRhLFxyXG4gICAgICBoZWFkZXJzOiBuZXcgTWFwKCksXHJcbiAgICB9KSksXHJcbiAgfSxcclxufSkpXHJcblxyXG5kZXNjcmliZSgnSGVhbHRoIEFQSScsICgpID0+IHtcclxuICBiZWZvcmVFYWNoKCgpID0+IHtcclxuICAgIC8vIFJlc2V0IGZldGNoIG1vY2sgYmVmb3JlIGVhY2ggdGVzdFxyXG4gICAgamVzdC5jbGVhckFsbE1vY2tzKClcclxuICB9KVxyXG5cclxuICBpdCgncmV0dXJucyAyMDAgc3RhdHVzIHdpdGggaGVhbHRoIGluZm9ybWF0aW9uJywgYXN5bmMgKCkgPT4ge1xyXG4gIC8vIENyZWF0ZSBhIG1pbmltYWwgTmV4dFJlcXVlc3QtbGlrZSBtb2NrXHJcbiAgICBjb25zdCByZXF1ZXN0ID0gbmV3IFJlcXVlc3QoJ2h0dHA6Ly9sb2NhbGhvc3Q6MzAwMC9hcGkvaGVhbHRoJylcclxuICAgIC8vIEB0cy1pZ25vcmUgLSBhZGFwdCBtaW5pbWFsIHNoYXBlIGZvciBOZXh0UmVxdWVzdFxyXG4gICAgY29uc3QgbmV4dFJlcTogYW55ID0gcmVxdWVzdFxyXG4gICAgY29uc3QgcmVzcG9uc2UgPSBhd2FpdCBHRVQobmV4dFJlcSlcclxuICAgIFxyXG4gICAgZXhwZWN0KHJlc3BvbnNlLnN0YXR1cykudG9CZSgyMDApXHJcbiAgICBcclxuICAgIGNvbnN0IGRhdGEgPSBhd2FpdCByZXNwb25zZS5qc29uKClcclxuICAgIGV4cGVjdChkYXRhKS50b0hhdmVQcm9wZXJ0eSgnc3RhdHVzJylcclxuICAgIGV4cGVjdChkYXRhKS50b0hhdmVQcm9wZXJ0eSgndGltZXN0YW1wJylcclxuICAgIGV4cGVjdChkYXRhKS50b0hhdmVQcm9wZXJ0eSgndmVyc2lvbicpXHJcbiAgICBleHBlY3QoZGF0YS5zdGF0dXMpLnRvQmUoJ2hlYWx0aHknKVxyXG4gIH0pXHJcblxyXG4gIGl0KCdpbmNsdWRlcyByZXF1aXJlZCBoZWFsdGggY2hlY2sgZmllbGRzJywgYXN5bmMgKCkgPT4ge1xyXG4gICAgY29uc3QgcmVxdWVzdCA9IG5ldyBSZXF1ZXN0KCdodHRwOi8vbG9jYWxob3N0OjMwMDAvYXBpL2hlYWx0aCcpXHJcbiAgICBcclxuICAgIGNvbnN0IHJlc3BvbnNlID0gYXdhaXQgR0VUKHJlcXVlc3QpXHJcbiAgICBjb25zdCBkYXRhID0gYXdhaXQgcmVzcG9uc2UuanNvbigpXHJcbiAgICBcclxuICAgIGV4cGVjdChkYXRhKS50b0hhdmVQcm9wZXJ0eSgnZGF0YWJhc2UnKVxyXG4gICAgZXhwZWN0KGRhdGEpLnRvSGF2ZVByb3BlcnR5KCd1cHRpbWUnKVxyXG4gICAgZXhwZWN0KGRhdGEpLnRvSGF2ZVByb3BlcnR5KCdlbnZpcm9ubWVudCcpXHJcbiAgfSlcclxuXHJcbiAgaXQoJ3JldHVybnMgY29ycmVjdCByZXNwb25zZSBmb3JtYXQnLCBhc3luYyAoKSA9PiB7XHJcbiAgICBjb25zdCByZXF1ZXN0ID0gbmV3IFJlcXVlc3QoJ2h0dHA6Ly9sb2NhbGhvc3Q6MzAwMC9hcGkvaGVhbHRoJylcclxuICAgIFxyXG4gICAgY29uc3QgcmVzcG9uc2UgPSBhd2FpdCBHRVQocmVxdWVzdClcclxuICAgIGNvbnN0IGRhdGEgPSBhd2FpdCByZXNwb25zZS5qc29uKClcclxuICAgIFxyXG4gICAgLy8gQ2hlY2sgYWxsIHJlcXVpcmVkIGZpZWxkc1xyXG4gICAgZXhwZWN0KGRhdGEpLnRvSGF2ZVByb3BlcnR5KCdzdGF0dXMnKVxyXG4gICAgZXhwZWN0KGRhdGEpLnRvSGF2ZVByb3BlcnR5KCd0aW1lc3RhbXAnKVxyXG4gICAgZXhwZWN0KGRhdGEpLnRvSGF2ZVByb3BlcnR5KCd2ZXJzaW9uJylcclxuICAgIGV4cGVjdChkYXRhKS50b0hhdmVQcm9wZXJ0eSgnZW52aXJvbm1lbnQnKVxyXG4gICAgZXhwZWN0KGRhdGEpLnRvSGF2ZVByb3BlcnR5KCdkYXRhYmFzZScpXHJcbiAgICBleHBlY3QoZGF0YSkudG9IYXZlUHJvcGVydHkoJ3VwdGltZScpXHJcbiAgICBleHBlY3QoZGF0YSkudG9IYXZlUHJvcGVydHkoJ21lbW9yeScpXHJcbiAgICBcclxuICAgIC8vIENoZWNrIGRhdGEgdHlwZXNcclxuICAgIGV4cGVjdCh0eXBlb2YgZGF0YS5zdGF0dXMpLnRvQmUoJ3N0cmluZycpXHJcbiAgICBleHBlY3QodHlwZW9mIGRhdGEudGltZXN0YW1wKS50b0JlKCdzdHJpbmcnKVxyXG4gICAgZXhwZWN0KHR5cGVvZiBkYXRhLnZlcnNpb24pLnRvQmUoJ3N0cmluZycpXHJcbiAgICBleHBlY3QodHlwZW9mIGRhdGEuZW52aXJvbm1lbnQpLnRvQmUoJ3N0cmluZycpXHJcbiAgICBleHBlY3QodHlwZW9mIGRhdGEuZGF0YWJhc2UpLnRvQmUoJ3N0cmluZycpXHJcbiAgICBleHBlY3QodHlwZW9mIGRhdGEudXB0aW1lKS50b0JlKCdudW1iZXInKVxyXG4gICAgZXhwZWN0KHR5cGVvZiBkYXRhLm1lbW9yeSkudG9CZSgnb2JqZWN0JylcclxuICB9KVxyXG59KSAiXSwibmFtZXMiOlsiamVzdCIsIm1vY2siLCJOZXh0UmVzcG9uc2UiLCJqc29uIiwiZm4iLCJkYXRhIiwib3B0aW9ucyIsInN0YXR1cyIsImhlYWRlcnMiLCJNYXAiLCJkZXNjcmliZSIsImJlZm9yZUVhY2giLCJjbGVhckFsbE1vY2tzIiwiaXQiLCJyZXF1ZXN0IiwiUmVxdWVzdCIsIm5leHRSZXEiLCJyZXNwb25zZSIsIkdFVCIsImV4cGVjdCIsInRvQmUiLCJ0b0hhdmVQcm9wZXJ0eSIsInRpbWVzdGFtcCIsInZlcnNpb24iLCJlbnZpcm9ubWVudCIsImRhdGFiYXNlIiwidXB0aW1lIiwibWVtb3J5Il0sIm1hcHBpbmdzIjoiO0FBRUEsb0JBQW9CO0FBQ3BCQSxLQUFLQyxJQUFJLENBQUMsZUFBZSxJQUFPLENBQUE7UUFDOUJDLGNBQWM7WUFDWkMsTUFBTUgsS0FBS0ksRUFBRSxDQUFDLENBQUNDLE1BQU1DLFVBQWEsQ0FBQTtvQkFDaENDLFFBQVFELFNBQVNDLFVBQVU7b0JBQzNCSixNQUFNLFVBQVlFO29CQUNsQkcsU0FBUyxJQUFJQztnQkFDZixDQUFBO1FBQ0Y7SUFDRixDQUFBOzs7O3VCQVhvQjtBQWFwQkMsU0FBUyxjQUFjO0lBQ3JCQyxXQUFXO1FBQ1Qsb0NBQW9DO1FBQ3BDWCxLQUFLWSxhQUFhO0lBQ3BCO0lBRUFDLEdBQUcsOENBQThDO1FBQ2pELHlDQUF5QztRQUN2QyxNQUFNQyxVQUFVLElBQUlDLFFBQVE7UUFDNUIsbURBQW1EO1FBQ25ELE1BQU1DLFVBQWVGO1FBQ3JCLE1BQU1HLFdBQVcsTUFBTUMsSUFBQUEsVUFBRyxFQUFDRjtRQUUzQkcsT0FBT0YsU0FBU1YsTUFBTSxFQUFFYSxJQUFJLENBQUM7UUFFN0IsTUFBTWYsT0FBTyxNQUFNWSxTQUFTZCxJQUFJO1FBQ2hDZ0IsT0FBT2QsTUFBTWdCLGNBQWMsQ0FBQztRQUM1QkYsT0FBT2QsTUFBTWdCLGNBQWMsQ0FBQztRQUM1QkYsT0FBT2QsTUFBTWdCLGNBQWMsQ0FBQztRQUM1QkYsT0FBT2QsS0FBS0UsTUFBTSxFQUFFYSxJQUFJLENBQUM7SUFDM0I7SUFFQVAsR0FBRyx5Q0FBeUM7UUFDMUMsTUFBTUMsVUFBVSxJQUFJQyxRQUFRO1FBRTVCLE1BQU1FLFdBQVcsTUFBTUMsSUFBQUEsVUFBRyxFQUFDSjtRQUMzQixNQUFNVCxPQUFPLE1BQU1ZLFNBQVNkLElBQUk7UUFFaENnQixPQUFPZCxNQUFNZ0IsY0FBYyxDQUFDO1FBQzVCRixPQUFPZCxNQUFNZ0IsY0FBYyxDQUFDO1FBQzVCRixPQUFPZCxNQUFNZ0IsY0FBYyxDQUFDO0lBQzlCO0lBRUFSLEdBQUcsbUNBQW1DO1FBQ3BDLE1BQU1DLFVBQVUsSUFBSUMsUUFBUTtRQUU1QixNQUFNRSxXQUFXLE1BQU1DLElBQUFBLFVBQUcsRUFBQ0o7UUFDM0IsTUFBTVQsT0FBTyxNQUFNWSxTQUFTZCxJQUFJO1FBRWhDLDRCQUE0QjtRQUM1QmdCLE9BQU9kLE1BQU1nQixjQUFjLENBQUM7UUFDNUJGLE9BQU9kLE1BQU1nQixjQUFjLENBQUM7UUFDNUJGLE9BQU9kLE1BQU1nQixjQUFjLENBQUM7UUFDNUJGLE9BQU9kLE1BQU1nQixjQUFjLENBQUM7UUFDNUJGLE9BQU9kLE1BQU1nQixjQUFjLENBQUM7UUFDNUJGLE9BQU9kLE1BQU1nQixjQUFjLENBQUM7UUFDNUJGLE9BQU9kLE1BQU1nQixjQUFjLENBQUM7UUFFNUIsbUJBQW1CO1FBQ25CRixPQUFPLE9BQU9kLEtBQUtFLE1BQU0sRUFBRWEsSUFBSSxDQUFDO1FBQ2hDRCxPQUFPLE9BQU9kLEtBQUtpQixTQUFTLEVBQUVGLElBQUksQ0FBQztRQUNuQ0QsT0FBTyxPQUFPZCxLQUFLa0IsT0FBTyxFQUFFSCxJQUFJLENBQUM7UUFDakNELE9BQU8sT0FBT2QsS0FBS21CLFdBQVcsRUFBRUosSUFBSSxDQUFDO1FBQ3JDRCxPQUFPLE9BQU9kLEtBQUtvQixRQUFRLEVBQUVMLElBQUksQ0FBQztRQUNsQ0QsT0FBTyxPQUFPZCxLQUFLcUIsTUFBTSxFQUFFTixJQUFJLENBQUM7UUFDaENELE9BQU8sT0FBT2QsS0FBS3NCLE1BQU0sRUFBRVAsSUFBSSxDQUFDO0lBQ2xDO0FBQ0YifQ==