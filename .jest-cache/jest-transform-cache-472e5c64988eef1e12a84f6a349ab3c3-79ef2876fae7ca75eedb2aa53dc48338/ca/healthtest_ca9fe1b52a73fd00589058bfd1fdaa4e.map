{"version":3,"sources":["/workspace/tests/api/health.test.ts"],"sourcesContent":["import { GET } from '../../app/api/health/route'\nimport { NextRequest } from 'next/server'\n\n// Mock NextResponse\njest.mock('next/server', () => ({\n  NextResponse: {\n    json: jest.fn((data, options) => ({\n      status: options?.status || 200,\n      json: async () => data,\n      headers: new Map(),\n    })),\n  },\n}))\n\ndescribe('Health API', () => {\n  beforeEach(() => {\n    // Reset fetch mock before each test\n    jest.clearAllMocks()\n  })\n\n  it('returns 200 status with health information', async () => {\n    const request = new NextRequest(new URL('http://localhost:3000/api/health'))\n    \n    const response = await GET(request)\n    \n    expect(response.status).toBe(200)\n    \n    const data = await response.json()\n    expect(data).toHaveProperty('status')\n    expect(data).toHaveProperty('timestamp')\n    expect(data).toHaveProperty('version')\n    expect(data.status).toBe('healthy')\n  })\n\n  it('includes required health check fields', async () => {\n    const request = new NextRequest(new URL('http://localhost:3000/api/health'))\n    \n    const response = await GET(request)\n    const data = await response.json()\n    \n    expect(data).toHaveProperty('database')\n    expect(data).toHaveProperty('uptime')\n    expect(data).toHaveProperty('environment')\n  })\n\n  it('returns correct response format', async () => {\n    const request = new NextRequest(new URL('http://localhost:3000/api/health'))\n    \n    const response = await GET(request)\n    const data = await response.json()\n    \n    // Check all required fields\n    expect(data).toHaveProperty('status')\n    expect(data).toHaveProperty('timestamp')\n    expect(data).toHaveProperty('version')\n    expect(data).toHaveProperty('environment')\n    expect(data).toHaveProperty('database')\n    expect(data).toHaveProperty('uptime')\n    expect(data).toHaveProperty('memory')\n    \n    // Check data types\n    expect(typeof data.status).toBe('string')\n    expect(typeof data.timestamp).toBe('string')\n    expect(typeof data.version).toBe('string')\n    expect(typeof data.environment).toBe('string')\n    expect(typeof data.database).toBe('string')\n    expect(typeof data.uptime).toBe('number')\n    expect(typeof data.memory).toBe('object')\n  })\n}) "],"names":["jest","mock","NextResponse","json","fn","data","options","status","headers","Map","describe","beforeEach","clearAllMocks","it","request","NextRequest","URL","response","GET","expect","toBe","toHaveProperty","timestamp","version","environment","database","uptime","memory"],"mappings":";AAGA,oBAAoB;AACpBA,KAAKC,IAAI,CAAC,eAAe,IAAO,CAAA;QAC9BC,cAAc;YACZC,MAAMH,KAAKI,EAAE,CAAC,CAACC,MAAMC,UAAa,CAAA;oBAChCC,QAAQD,SAASC,UAAU;oBAC3BJ,MAAM,UAAYE;oBAClBG,SAAS,IAAIC;gBACf,CAAA;QACF;IACF,CAAA;;;;uBAZoB;wBACQ;AAa5BC,SAAS,cAAc;IACrBC,WAAW;QACT,oCAAoC;QACpCX,KAAKY,aAAa;IACpB;IAEAC,GAAG,8CAA8C;QAC/C,MAAMC,UAAU,IAAIC,mBAAW,CAAC,IAAIC,IAAI;QAExC,MAAMC,WAAW,MAAMC,IAAAA,UAAG,EAACJ;QAE3BK,OAAOF,SAASV,MAAM,EAAEa,IAAI,CAAC;QAE7B,MAAMf,OAAO,MAAMY,SAASd,IAAI;QAChCgB,OAAOd,MAAMgB,cAAc,CAAC;QAC5BF,OAAOd,MAAMgB,cAAc,CAAC;QAC5BF,OAAOd,MAAMgB,cAAc,CAAC;QAC5BF,OAAOd,KAAKE,MAAM,EAAEa,IAAI,CAAC;IAC3B;IAEAP,GAAG,yCAAyC;QAC1C,MAAMC,UAAU,IAAIC,mBAAW,CAAC,IAAIC,IAAI;QAExC,MAAMC,WAAW,MAAMC,IAAAA,UAAG,EAACJ;QAC3B,MAAMT,OAAO,MAAMY,SAASd,IAAI;QAEhCgB,OAAOd,MAAMgB,cAAc,CAAC;QAC5BF,OAAOd,MAAMgB,cAAc,CAAC;QAC5BF,OAAOd,MAAMgB,cAAc,CAAC;IAC9B;IAEAR,GAAG,mCAAmC;QACpC,MAAMC,UAAU,IAAIC,mBAAW,CAAC,IAAIC,IAAI;QAExC,MAAMC,WAAW,MAAMC,IAAAA,UAAG,EAACJ;QAC3B,MAAMT,OAAO,MAAMY,SAASd,IAAI;QAEhC,4BAA4B;QAC5BgB,OAAOd,MAAMgB,cAAc,CAAC;QAC5BF,OAAOd,MAAMgB,cAAc,CAAC;QAC5BF,OAAOd,MAAMgB,cAAc,CAAC;QAC5BF,OAAOd,MAAMgB,cAAc,CAAC;QAC5BF,OAAOd,MAAMgB,cAAc,CAAC;QAC5BF,OAAOd,MAAMgB,cAAc,CAAC;QAC5BF,OAAOd,MAAMgB,cAAc,CAAC;QAE5B,mBAAmB;QACnBF,OAAO,OAAOd,KAAKE,MAAM,EAAEa,IAAI,CAAC;QAChCD,OAAO,OAAOd,KAAKiB,SAAS,EAAEF,IAAI,CAAC;QACnCD,OAAO,OAAOd,KAAKkB,OAAO,EAAEH,IAAI,CAAC;QACjCD,OAAO,OAAOd,KAAKmB,WAAW,EAAEJ,IAAI,CAAC;QACrCD,OAAO,OAAOd,KAAKoB,QAAQ,EAAEL,IAAI,CAAC;QAClCD,OAAO,OAAOd,KAAKqB,MAAM,EAAEN,IAAI,CAAC;QAChCD,OAAO,OAAOd,KAAKsB,MAAM,EAAEP,IAAI,CAAC;IAClC;AACF"}